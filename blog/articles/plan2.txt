temp tcdb
    goal
        what spring version is compatiible with testContainers
    topics
        sections
            intro
            table
            args to each version
        versions
            test container
                1.19
                18
                17
                16..3
                    passou tudo
                15
                    precisa add lib manual
                        jetbrains
                    nao tem
                        setHostAccessible
            springboot
                3.2
                2.6
                2.5.6
                    TestEngine with ID 'junit-jupiter'
                        devido libs adicionadas manualmente
                        refazer teste sem as libs
                            ver se roda os testes
                            jupiter
                            na versao 15 do test containers
                                nao rodou
                                na 16 sem as libs rodou
                            ver se as libs foram adicionadas no testcontainers ou spring
                                acho que testcontainers mesmo
                                passou com spring 2.5.6
                                mas nao passou com test 15
                    passou
                1.5
                    nao tem boot-devtools
                        developmentOnly 'org.springframework.boot:spring-boot-devtools'
                    kafka
                        groupId
                            nao tem
                    nao tem
                        jupiter api
                            junit 5
                        DynamicPropertyRegistry
                        TestPropertyValues
    tasks
        done
            plan goal
            plan sections
            plan
            create branch in last spring branch
                project
                    sample-api
                article-spring-versions
            configure files to be dynamic
                done
                    create make script to run all tests
                    run all tests
                    use gradle test
                    fix tests
                        13
                            done
                                res handler
                                create auth
                                inq res
                                lights
                                    auth res
                                    inq res
                                user repository
                                    nao esta lancando duplicated no mongo
                                        estudar como fazer
                                            site oficial
                                            baeldung
                                        solucao
                                            precisa de criar os index
                                                spring.data.mongodb.auto-index-creation=true
                                commit user repo
                                    note vostro
                                inquilinoConsumerIT
                                    done
                                        not call the usecase
                                            listen not call usecase
                                                debug
                                                    kafka is running
                                                    olhar com kafka-ui
                                                        tem topico
                                                        tem msg
                                                        erro é no consumer ?
                                                        erro somente no teste  ?
                                        commit
                                        add config para criar topico
                                            criar topico auto
                                            nao podemos, pois em prd nao teria
                                sample application
                                    not loading property
                                    not injectiong evn
                                    debug
                                    a change can be ignore this test
                                        just skip for finish the article
                    to change the version easly
                        done
                        plan
                            what is the best way to put dynamic versions ?
                                gradle properties ?
                                sys env ?
                            how many versions we will cover
                                test container
                                    1.19
                                    18
                                    17
                                    16
                                    15
                                springboot
                                    3.2
                                    2.6
                                    1.5
                                spring context
                                    3.2.18.RELEASE
                                    5.2
                                    5.3
                                    6
                                    6.1
                        change
                            as Spring as testContainers
                            in gradle
                        we used gradle properties
                            with interpolação
                                ${propertyName}
                    commit
            fix test
                ignore
                    sample api
                    base producer
                resource
            teste de consumer falhando
                quando roda tudo junto com test task
                    passa normal rodando separado
                    talvez colocar um dirty context
                    debugar e ver qual o log do tests
                debug
                    done
                        add nome de topico
                            era a falta de dar nome ao topico
                        ambos testes passam via idea
                    parece que o erro foi o consumer nao ter sido sobrescribed e jah ter chamado o poll dele
                        talvez colocar um listener o start
                        listener nao esta sendo chamado
                            talvez almentar tempo de mock
                                ver se rebalance esta ocorrendo e quanto tempo leva o rebalance
                        aumentamos o timeout e funfoou
                            60_000
                    solucao
                        erro era a forma de fazer assing do consumer
                            subscription usa rebalance do consumer group
                            assign nao usa consumer group
                        usamos assign e parou de fazer rebalance e testes passaram
            try to fix the error in resource IT
                done
                    disabled
                    there are errors from mock mvc
                        may be configured wrong way
        run tests task
            done
                run olds versions
                create makefile to increase the velocity of runs
                run version intermediate
            list all break changes
            plan article if have some relevance
        change to
            old spring project
            create tests
        resume documentations
        create table to versions
        next article
            sem spring boot. spring context
                3.2.18.RELEASE
                5.2
                5.3
                6
                6.1
